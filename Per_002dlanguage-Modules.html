<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- This file documents the Software Evolution library

Copyright (C) 2014-2018 Eric Schulte and GrammaTech

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3
or any later version published by the Free Software Foundation;
with the Invariant Section being "GNU GENERAL PUBLIC LICENSE,"
A copy of the license is included in the section entitled
"GNU Free Documentation License." -->
<!-- Created by GNU Texinfo 6.7, http://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Per-language Modules (Software Evolution Library)</title>

<meta name="description" content="Per-language Modules (Software Evolution Library)">
<meta name="keywords" content="Per-language Modules (Software Evolution Library)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="index.html" rel="start" title="Top">
<link href="Combined-Index.html" rel="index" title="Combined Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Source-Code-with-tree_002dsitter.html" rel="up" title="Source Code with tree-sitter">
<link href="cl_002dtree_002dsitter-Setup.html" rel="next" title="cl-tree-sitter Setup">
<link href="Setting-up-libtree_002dsitter.html" rel="prev" title="Setting up libtree-sitter">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="en">
<span id="Per_002dlanguage-Modules"></span><div class="header">
<p>
Next: <a href="cl_002dtree_002dsitter-Setup.html" accesskey="n" rel="next">cl-tree-sitter Setup</a>, Previous: <a href="Setting-up-libtree_002dsitter.html" accesskey="p" rel="prev">Setting up libtree-sitter</a>, Up: <a href="Source-Code-with-tree_002dsitter.html" accesskey="u" rel="up">Source Code with <code>tree-sitter</code></a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Combined-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<span id="Per_002dlanguage-Modules-1"></span><h4 class="subsection">2.1.3 Per-language Modules</h4>
<span id="index-pre_002dlanguage_002dmodules"></span>

<p>Each language has its own module that can be used with tree-sitter. All of
the languages that are currently supported can be found here:
<a href="https://github.com/tree-sitter">https://github.com/tree-sitter</a>.
</p>
<p>For convience:
</p><ul>
<li> <a href="https://github.com/tree-sitter/tree-sitter-c">https://github.com/tree-sitter/tree-sitter-c</a>
</li><li> <a href="https://github.com/tree-sitter/tree-sitter-java">https://github.com/tree-sitter/tree-sitter-java</a>
</li><li> <a href="https://github.com/tree-sitter/tree-sitter-javascript">https://github.com/tree-sitter/tree-sitter-javascript</a>
</li><li> <a href="https://github.com/tree-sitter/tree-sitter-json">https://github.com/tree-sitter/tree-sitter-json</a>
</li><li> <a href="https://github.com/tree-sitter/tree-sitter-python">https://github.com/tree-sitter/tree-sitter-python</a>

</li></ul>
<p>To set-up a language, the following script can be used from the base
directory of the language module&rsquo;s directory:
</p>
<table class="cartouche" border="1"><tr><td>
<div class="example">
<pre class="example">    #!/bin/bash
    language=$1

    [ $# -eq 0 ] &amp;&amp; { echo &quot;Usage: $0 language_name&quot;; exit 1; }

    cd src/

    if test -f &quot;scanner.cc&quot;; then
        clang++ -fPIC scanner.cc -c -lstdc++
        clang -std=c99 -fPIC parser.c -c
        clang++ -shared scanner.o parser.o -o /usr/lib/tree-sitter-$(echo ${language}|sed 's|/|-|').so
    elif test -f &quot;scanner.c&quot;; then
        clang -std=c99 -fPIC scanner.c -c
        clang -std=c99 -fPIC parser.c -c
        clang -shared scanner.o parser.o -o /usr/lib/tree-sitter-$(echo ${language}|sed 's|/|-|').so
    else
        clang -std=c99 -fPIC parser.c -c
        clang -shared parser.o -o /usr/lib/tree-sitter-$(echo ${language}|sed 's|/|-|').so
    fi

    sudo mkdir -p /usr/share/tree-sitter/${language}/
    sudo cp grammar.json node-types.json /usr/share/tree-sitter/${language}
</pre></div>
</td></tr></table>

<p>If everything is desired, the following can be used:
</p>
<table class="cartouche" border="1"><tr><td>
<div class="example">
<pre class="example">    #!/bin/bash
    for language in agda bash c c-sharp cpp css go html java javascript jsdoc json julia ocaml/ocaml ocaml/interface php python ql regex ruby rust scala typescript/tsx typescript/typescript;do
        [ -d tree-sitter-${language%/*} ] || git clone --depth=1 https://github.com/tree-sitter/tree-sitter-${language%/*}
        cd tree-sitter-${language}/src
        if test -f &quot;scanner.cc&quot;; then
            clang++ -fPIC scanner.cc -c -lstdc++
            clang -std=c99 -fPIC parser.c -c
            clang++ -shared scanner.o parser.o -o /usr/lib/tree-sitter-$(echo ${language}|sed 's|/|-|').so
        elif test -f &quot;scanner.c&quot;; then
            clang -std=c99 -fPIC scanner.c -c
            clang -std=c99 -fPIC parser.c -c
            clang -shared scanner.o parser.o -o /usr/lib/tree-sitter-$(echo ${language}|sed 's|/|-|').so
        else
            clang -std=c99 -fPIC parser.c -c
            clang -shared parser.o -o /usr/lib/tree-sitter-$(echo ${language}|sed 's|/|-|').so
        fi
        mkdir -p /usr/share/tree-sitter/${language}/
        cp grammar.json node-types.json /usr/share/tree-sitter/${language}
        cd -
    done
</pre></div>
</td></tr></table>

<p>On Arch Linux the
<a href="https://aur.archlinux.org/packages/tree-sitter-languages-git/">tree-sitter-languages-git</a> <code>aur</code> package may be used to install
tree-sitter support for many languages.
</p>
<p>On MacOS the following shell script may be used to achieve similar
results:
</p>
<table class="cartouche" border="1"><tr><td>
<div class="example">
<pre class="example">    #!/bin/bash

    declare -a LANGUAGES
    LANGUAGES=agda bash c c-sharp cpp css go html java javascript jsdoc json julia ocaml/ocaml ocaml/interface php python ql regex ruby rust scala typescript/tsx typescript/typescript

    clone() {
      for language in ${LANGUAGES};do
        LANG=&quot;$(echo ${language}|sed 's|/|-|')&quot;
        git clone https://github.com/tree-sitter/tree-sitter-${LANG} src/tree-sitter-${LANG}
      done
    }

    package() {
      for language in ${LANGUAGES};do
        echo $language
        LANG=&quot;$(echo ${language}|sed 's|/|-|')&quot;
        BASE=&quot;tree-sitter-${LANG}&quot;
        cd src/tree-sitter-${language}/src
        if test -f &quot;scanner.cc&quot;; then
            c++ -fPIC scanner.cc -c -lstdc++
            cc -std=c99 -fPIC parser.c -c
            ar rcs ${BASE}.a scanner.o parser.o
            c++ -dynamiclib -Wl,-install_name,/usr/local/lib/${BASE}.0.dylib scanner.o parser.o -o ${BASE}.0.0.dylib
            ln -sf ${BASE}.0.0.dylib ${BASE}.dylib
            ln -sf ${BASE}.0.0.dylib ${BASE}.0.dylib
            sudo install -d &quot;/usr/local/lib/tree-sitter/$LANG&quot;
            sudo install -m755 ${BASE}.a &quot;/usr/local/lib/tree-sitter/${BASE}&quot;.a
            sudo install -m755 ${BASE}.0.0.dylib '/usr/local/lib'/${BASE}.0.0.dylib
            ln -sf ${BASE}.0.0.dylib '/usr/local/lib'/${BASE}.0.dylib
            ln -sf ${BASE}.0.0.dylib '/usr/local/lib'/${BASE}.dylib
        elif test -f &quot;scanner.c&quot;; then
            cc -std=c99 -fPIC scanner.c -c
            cc -std=c99 -fPIC parser.c -c
            ar rcs ${BASE}.a scanner.o parser.o
            c++ -dynamiclib -Wl,-install_name,/usr/local/lib/${BASE}.0.dylib scanner.o parser.o -o ${BASE}.0.0.dylib
            ln -sf ${BASE}.0.0.dylib ${BASE}.dylib
            ln -sf ${BASE}.0.0.dylib ${BASE}.0.dylib
            sudo install -d &quot;/usr/local/lib/tree-sitter/$LANG&quot;
            sudo install -m755 ${BASE}.a &quot;/usr/local/lib/tree-sitter/${BASE}&quot;.a
            sudo install -m755 ${BASE}.0.0.dylib '/usr/local/lib'/${BASE}.0.0.dylib
            ln -sf ${BASE}.0.0.dylib '/usr/local/lib'/${BASE}.0.dylib
            ln -sf ${BASE}.0.0.dylib '/usr/local/lib'/${BASE}.dylib
        else
            cc -std=c99 -fPIC parser.c -c
            ar rcs ${BASE}.a parser.o
            c++ -dynamiclib -Wl,-install_name,/usr/local/lib/${BASE}.0.dylib parser.o -o ${BASE}.0.0.dylib
            ln -sf ${BASE}.0.0.dylib ${BASE}.dylib
            ln -sf ${BASE}.0.0.dylib ${BASE}.0.dylib
            sudo install -d &quot;/usr/local/lib/tree-sitter/$LANG&quot;
            sudo install -m755 ${BASE}.a &quot;/usr/local/lib/tree-sitter/${BASE}&quot;.a
            sudo install -m755 ${BASE}.0.0.dylib '/usr/local/lib'/${BASE}.0.0.dylib
            ln -sf ${BASE}.0.0.dylib '/usr/local/lib'/${BASE}.0.dylib
            ln -sf ${BASE}.0.0.dylib '/usr/local/lib'/${BASE}.dylib
        fi
        sudo install -d /usr/local/share/tree-sitter/${language}/
        sudo install -m644 grammar.json node-types.json /usr/local/share/tree-sitter/${language}/
        cd - &gt;/dev/null
      done

    }

    mkdir -p src/
    clone
    package
</pre></div>
</td></tr></table>

<hr>
<div class="header">
<p>
Next: <a href="cl_002dtree_002dsitter-Setup.html" accesskey="n" rel="next">cl-tree-sitter Setup</a>, Previous: <a href="Setting-up-libtree_002dsitter.html" accesskey="p" rel="prev">Setting up libtree-sitter</a>, Up: <a href="Source-Code-with-tree_002dsitter.html" accesskey="u" rel="up">Source Code with <code>tree-sitter</code></a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Combined-Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
