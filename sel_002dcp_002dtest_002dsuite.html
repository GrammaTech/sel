<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- This file documents the Software Evolution library

Copyright (C) 2014-2018 Eric Schulte and GrammaTech

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3
or any later version published by the Free Software Foundation;
with the Invariant Section being "GNU GENERAL PUBLIC LICENSE,"
A copy of the license is included in the section entitled
"GNU Free Documentation License." -->
<!-- Created by GNU Texinfo 6.5, http://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>sel-cp-test-suite (Software Evolution Library)</title>

<meta name="description" content="sel-cp-test-suite (Software Evolution Library)">
<meta name="keywords" content="sel-cp-test-suite (Software Evolution Library)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="index.html#Top" rel="start" title="Top">
<link href="Index.html#Index" rel="index" title="Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="SEL-Packages.html#SEL-Packages" rel="up" title="SEL Packages">
<link href="sel_002dcp_002dtraceable.html#sel_002dcp_002dtraceable" rel="next" title="sel-cp-traceable">
<link href="sel_002dcp_002dserapi_002dio.html#sel_002dcp_002dserapi_002dio" rel="prev" title="sel-cp-serapi-io">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
blockquote.smallindentedblock {margin-right: 0em; font-size: smaller}
blockquote.smallquotation {font-size: smaller}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
div.smalldisplay {margin-left: 3.2em}
div.smallexample {margin-left: 3.2em}
div.smalllisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: inherit; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: inherit; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="en">
<a name="sel_002dcp_002dtest_002dsuite"></a>
<div class="header">
<p>
Next: <a href="sel_002dcp_002dtraceable.html#sel_002dcp_002dtraceable" accesskey="n" rel="next">sel-cp-traceable</a>, Previous: <a href="sel_002dcp_002dserapi_002dio.html#sel_002dcp_002dserapi_002dio" accesskey="p" rel="prev">sel-cp-serapi-io</a>, Up: <a href="SEL-Packages.html#SEL-Packages" accesskey="u" rel="up">SEL Packages</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html#Index" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<a name="sel_002dcp_002dtest_002dsuite-1"></a>
<h3 class="section">C.60 sel-cp-test-suite</h3>
<a name="Variable-_002aprocess_002dkill_002dtimeout_002a"></a><dl>
<dt><a name="index-_002aprocess_002dkill_002dtimeout_002a"></a>Variable: <strong>*process-kill-timeout*</strong></dt>
<dd><p>Timeout (in seconds) before killing a process with <code>sigkill</code>
</p></dd></dl>
<a name="Generic_002dFunction-finish_002dtest"></a><dl>
<dt><a name="index-finish_002dtest"></a>Generic Function: <strong>finish-test</strong> <em>test-process</em></dt>
<dd><p>Ensure that <code>test-process</code> either runs to completion or is killed.
Return the standard output, error output, and process exit code as strings.
</p>
<p>* <code>test-process</code> the &lsquo;process&rsquo; associated with the test case.
</p></dd></dl>
<a name="Method-finish_002dtest-_0028_0028test_002dprocess-process_0029_0029"></a><dl>
<dt><a name="index-finish_002dtest-1"></a>Method: <strong>finish-test</strong> <em>(test-process process)</em></dt>
<dd><p>Ensure that <code>test-process</code> either runs to completion or is killed.
Return the standard output, error output, and process exit code as strings.
</p>
<p>* <code>test-process</code> the &lsquo;process&rsquo; associated with the test case.
</p>
<p>See also &lsquo;*process-sleep-interval*&rsquo; and &lsquo;*process-kill-timeout*&rsquo;. If
<code>test-process</code> is still running when &lsquo;finish-test&rsquo; is called, alternate between
sleeping for &lsquo;*process-sleep-interval*&rsquo; seconds and checking again until either
&lsquo;*process-kill-timeout*&rsquo; seconds have elapsed or the process completes. After
the timeout, send a <code>sigterm</code> signal if <code>test-process</code> is still running, sleep for
&lsquo;*process-sleep-interval*&rsquo; seconds once more and then if the process is still
running, send a <code>sigkill</code> signal.
</p></dd></dl>
<a name="Generic_002dFunction-run_002dtest"></a><dl>
<dt><a name="index-run_002dtest"></a>Generic Function: <strong>run-test</strong> <em>phenome test-case &amp;rest extra-keys &amp;key &amp;allow-other-keys</em></dt>
<dd><p>Run <code>test-case</code> on <code>phenome</code> and return the results.
Return the standard output, error output, and process exit code as strings.
</p></dd></dl>
<a name="Method-run_002dtest-_0028phenome-_0028test_002dcase-test_002dcase_0029-_0026rest-extra_002dkeys-_0026key-_0026allow_002dother_002dkeys_0029"></a><dl>
<dt><a name="index-run_002dtest-1"></a>Method: <strong>run-test</strong> <em>phenome (test-case test-case) &amp;rest extra-keys &amp;key &amp;allow-other-keys</em></dt>
<dd><p>Run <code>test-case</code> on <code>phenome</code> and return the results.
Return three values: output printed to standard out, error output, and exit
status. Th default behavior is simply to run &lsquo;start-test&rsquo; and &lsquo;finish-test&rsquo;.
</p></dd></dl>
<a name="Generic_002dFunction-start_002dtest"></a><dl>
<dt><a name="index-start_002dtest"></a>Generic Function: <strong>start-test</strong> <em>phenome test-case &amp;rest extra-keys &amp;key &amp;allow-other-keys</em></dt>
<dd><p>Start an external process to run <code>test-case</code> on <code>phenome</code>.
Return the &lsquo;process&rsquo;.
</p>
<ul>
<li> <code>phenome</code> the phenome of the &lsquo;software&rsquo; object under test.
</li><li> <code>test-case</code> the &lsquo;test-case&rsquo; to run.
</li><li> <code>extra-keys</code> additional keyword arguments.
</li></ul>
</dd></dl>
<a name="Method-start_002dtest-_0028phenome-_0028test_002dcase-test_002dcase_0029-_0026rest-extra_002dkeys-_0026key-_0026allow_002dother_002dkeys_0029"></a><dl>
<dt><a name="index-start_002dtest-1"></a>Method: <strong>start-test</strong> <em>phenome (test-case test-case) &amp;rest extra-keys &amp;key &amp;allow-other-keys</em></dt>
<dd><p>Start an external process to run <code>test-case</code> on <code>phenome</code>.
Return the &lsquo;process&rsquo;. This is a wrapper around &lsquo;uiop:launch-program&rsquo;, and any
<code>extra-keys</code> will be passed through to that method.
</p>
<ul>
<li> <code>phenome</code> the phenome of the &lsquo;software&rsquo; object under test.
</li><li> <code>test-case</code> the &lsquo;test-case&rsquo; to run.
</li><li> <code>extra-keys</code> additional keyword arguments to pass to &lsquo;uiop:launch-program&rsquo;.

</li></ul>
<p>Some <code>extra-keys</code> that may be useful are:
</p><ul>
<li> :output and :error-output <code>-</code> to specify how output and error streams are
  handled. In some cases, these are sent to /dev/null by default, making 
  inaccessible after the process completes, so it&rsquo;s often useful to set one or
  both of these to &lsquo;:stream&rsquo; to capture the output.

</li><li> :wait <code>-</code> whether to wait for the process to complete before continuing.
  The default is to wait; however, some components (such as &lsquo;traceable&rsquo;) may
  elect not to wait and instead to stream results through a named pipe.

</li><li> :env <code>-</code> to set environment variables
</li></ul>
</dd></dl>
<a name="Class-test_002dcase"></a><dl>
<dt><a name="index-test_002dcase"></a>Class: <strong>test-case</strong></dt>
<dd><p>Class precedence list: <code>test-case, standard-object, t</code>
</p>
<p>Slots:
</p><ul>
<li> <code>program-name</code> &mdash; initarg: <code><span class="nolinebreak">:program-name</span><!-- /@w --></code>; reader: <code><span class="nolinebreak">software-evolution-library/components/test-suite:program-name</span><!-- /@w --></code>; writer: <code>(setf&nbsp;<span class="nolinebreak">software-evolution-library/components/test-suite:program-name)</span><!-- /@w --></code>

<p>The executable that runs the test case.  
Contains either a string containing the name of an executable file or
special symbol :bin, which will be dynamically replaced by the name of
the compiled phenome for the software object under test.
</p></li><li> <code>program-args</code> &mdash; initarg: <code><span class="nolinebreak">:program-args</span><!-- /@w --></code>; reader: <code><span class="nolinebreak">software-evolution-library/components/test-suite:program-args</span><!-- /@w --></code>; writer: <code>(setf&nbsp;<span class="nolinebreak">software-evolution-library/components/test-suite:program-args)</span><!-- /@w --></code>

<p>A list of arguments which will be passed to the executable
<code>program-name</code>. 
Each argument must be either a string or symbol :bin, which will be
replaced by the name of the compiled phenome.
</p></li><li> <code>fitness</code> &mdash; initarg: <code>:fitness<!-- /@w --></code>; reader: <code><span class="nolinebreak">software-evolution-library/software-evolution-library:fitness</span><!-- /@w --></code>; writer: <code>(setf&nbsp;<span class="nolinebreak">software-evolution-library/software-evolution-library:fitness)</span><!-- /@w --></code>

<p>May be used to store the fitness result from a prior run of the test case. 
This field is not updated automatically since some components may need
to perform comparisons between new and old values (e.g., condition
synthesis).
</p></li></ul>

<p>Test case object.
</p></dd></dl>
<a name="Class-test_002dsuite"></a><dl>
<dt><a name="index-test_002dsuite-1"></a>Class: <strong>test-suite</strong></dt>
<dd><p>Class precedence list: <code>test-suite, oid-object, standard-object, t</code>
</p>
<p>Slots:
</p><ul>
<li> <code>test-cases</code> &mdash; initarg: <code><span class="nolinebreak">:test-cases</span><!-- /@w --></code>; reader: <code><span class="nolinebreak">software-evolution-library/components/test-suite:test-cases</span><!-- /@w --></code>; writer: <code>(setf&nbsp;<span class="nolinebreak">software-evolution-library/components/test-suite:test-cases)</span><!-- /@w --></code>

<p>List of &lsquo;test-case&rsquo; objects that make up the test suite.
</p></li></ul>

<p>A suite of unit tests.
</p></dd></dl>
<a name="Variable-_002aprocess_002dsleep_002dinterval_002a"></a><dl>
<dt><a name="index-_002aprocess_002dsleep_002dinterval_002a"></a>Variable: <strong>*process-sleep-interval*</strong></dt>
<dd><p>Frequency (in seconds) at which to check if a process has completed.
</p></dd></dl>

<hr>
<div class="header">
<p>
Next: <a href="sel_002dcp_002dtraceable.html#sel_002dcp_002dtraceable" accesskey="n" rel="next">sel-cp-traceable</a>, Previous: <a href="sel_002dcp_002dserapi_002dio.html#sel_002dcp_002dserapi_002dio" accesskey="p" rel="prev">sel-cp-serapi-io</a>, Up: <a href="SEL-Packages.html#SEL-Packages" accesskey="u" rel="up">SEL Packages</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html#Index" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
