<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- This file documents the Software Evolution library

Copyright (C) 2014-2018 Eric Schulte and GrammaTech

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3
or any later version published by the Free Software Foundation;
with the Invariant Section being "GNU GENERAL PUBLIC LICENSE,"
A copy of the license is included in the section entitled
"GNU Free Documentation License." -->
<!-- Created by GNU Texinfo 6.7, http://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Tracing (Software Evolution Library)</title>

<meta name="description" content="Tracing (Software Evolution Library)">
<meta name="keywords" content="Tracing (Software Evolution Library)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="index.html" rel="start" title="Top">
<link href="Index.html" rel="index" title="Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Components.html" rel="up" title="Components">
<link href="Super_002dMutants.html" rel="next" title="Super-Mutants">
<link href="Fault-Localization.html" rel="prev" title="Fault Localization">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="en">
<span id="Tracing"></span><div class="header">
<p>
Next: <a href="Super_002dMutants.html" accesskey="n" rel="next">Super-Mutants</a>, Previous: <a href="Fault-Localization.html" accesskey="p" rel="prev">Fault Localization</a>, Up: <a href="Components.html" accesskey="u" rel="up">Components</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<span id="Tracing-1"></span><h3 class="section">3.7 Tracing</h3>
<span id="index-tracing"></span>
<p>Software objects can be instrumented to trace their
execution. Instrumentation inserts source code to print program
locations, variable values, and other information as the program
runs. Traces can be saved to a file or read over a pipe for immediate
use.
</p>
<p>Software objects which need to support trace collection should include
an <code>instrument</code> method and derive from <a href="sel_002dcp_002dtraceable.html#Class-traceable"><code>traceable</code></a>.
</p>

<span id="Instrumenting"></span><h4 class="subsection">3.7.1 Instrumenting</h4>

<p>The <a href="sel_002dcp_002dinstrument.html#Generic_002dFunction-instrument"><code>instrument</code></a> method inserts instrumentation code
into a software object. By default the instrumentation will print
program locations as they are executed.
</p>


<p>The <code>instrument</code> method should inject logging into the software
object before each full statement; to avoid intermingling
instrumentation logs with program output, the instrumentation should
be printed to the file given by the <code>__SEL_TRACE_FILE</code> environment
variable. At a minimum, logging should include an AST counter (:C) and
variables in scope at the given point (:SCOPES). Currently, only
primitive types are instrumented.
</p>
<p>As an example, consider the following program.
</p>
<div class="example">
<pre class="example">int main(int argc, char** argv) {
    printf(&quot;Hello, World!&quot;);
        return 0;
        }
</pre></div>


<p>The trace returned will contain the following elements:
</p>
<div class="example">
<pre class="example">(((:INPUT :BIN) (:TRACE ((:C . 4)  (:SCOPES (&quot;argc&quot; &quot;int&quot; 1 NIL)))
                        ((:C . 10) (:SCOPES (&quot;argc&quot; &quot;int&quot; 1 NIL))))))
</pre></div>



<span id="Traces"></span><h4 class="subsection">3.7.2 Traces</h4>

<p>To collect traces, pass an instrumented version of the software object
to the <a href="sel_002dcp_002dtraceable.html#Generic_002dFunction-collect_002dtest_002dcase_002dtraces"><code>collect-test-case-traces</code></a> method along with a
<a href="sel_002dcp_002dtest_002dsuite.html#Class-test_002dsuite"><code>test-suite</code></a> of test cases you wish to execute on the
instrumented object.
</p>
<p>The trace format can store program locations, variables, and auxiliary
data represented as integers. Program locations are identified by a
single integer. For software spanning multiple files (with the
<code>project</code> class), the file and AST identifiers must be
packed into this integer.
</p>
<span id="Limitations"></span><h4 class="subsection">3.7.3 Limitations</h4>
<ul>
<li> Instrumentation of long double variables is not supported,
because CFFI (which is used to wrap the trace library) does not
support long doubles.

</li><li> The <code>:print-strings</code> option to
<a href="sel_002dcp_002dinstrument.html#Generic_002dFunction-var_002dinstrument"><code>var-instrument</code></a> does not print the contents of
wide-character strings.


</li></ul>

<hr>
<div class="header">
<p>
Next: <a href="Super_002dMutants.html" accesskey="n" rel="next">Super-Mutants</a>, Previous: <a href="Fault-Localization.html" accesskey="p" rel="prev">Fault Localization</a>, Up: <a href="Components.html" accesskey="u" rel="up">Components</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
